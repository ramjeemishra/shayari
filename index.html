
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shayari Section</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="shortcut icon" href="shayarilogo.jpeg" type="image/x-icon">

  <script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getDatabase,ref,set,get,push,update,remove}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";import{getAuth,signInWithEmailAndPassword}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";const firebaseConfig={apiKey:"AIzaSyDPBjSD85dnh4RTj9UWy46TS1zHOFpaoG8",authDomain:"shayaridatabase.firebaseapp.com",projectId:"shayaridatabase",storageBucket:"shayaridatabase.appspot.com",messagingSenderId:"255324173170",appId:"1:255324173170:web:4f2e7653c3f0f1b9d8a3eb",measurementId:"G-BR9FC3D3F3"},app=initializeApp(firebaseConfig),database=getDatabase(app),auth=getAuth(app);function loadShayaris(){const s=document.getElementById("shayari-container");s.innerHTML="";var e=ref(database,"shayaris");get(e).then(e=>{if(e.exists()){const n=[];e.forEach(e=>{var t=e.val();t.id=e.key,n.push(t)});for(let e=n.length-1;0<=e;e--){var t=n[e],a=document.createElement("div");a.classList.add("bg-gray-800","p-4","rounded","mb-4"),a.id="post-"+t.id,a.innerHTML=`
          <h2 style="display:none">${t.username}</h2>
          <p class="text-sm text-gray-400">${t.username} - ${t.timestamp}</p>
          <p style="white-space: pre-wrap;">${t.content}</p>
          <button class="like-button" data-shayari-id="${t.id}">
            <i class="fa-regular fa-heart"></i>
          </button>
          <span class="like-count" data-shayari-id="${t.id}">0</span>
          <a class="share-button" style="margin-left: 20px" href="#" target="_blank" data-shayari-id="${t.id}">
            <i class="fa-brands fa-whatsapp"></i>
          </a>
        `,s.appendChild(a),updateLikeCount(t.id)}setupShareLinks(n),s.addEventListener("click",e=>{e=e.target;"BUTTON"===e.tagName&&e.classList.contains("like-button")?handleLikeToggle(e.getAttribute("data-shayari-id")):"I"===e.tagName&&e.parentNode.classList.contains("like-button")&&handleLikeToggle(e.parentNode.getAttribute("data-shayari-id"))}),s.scrollTo({top:0,behavior:"smooth"})}else console.log("No shayaris found")}).catch(e=>{console.error("Error loading shayaris:",e)})}function setupShareLinks(e){e.forEach(e=>{var t=`https://wa.me/?text=${encodeURIComponent(e.username)} - ${encodeURIComponent(e.content)} - `+encodeURIComponent("https://shayarisection.netlify.app/"),e=document.querySelector(`a.share-button[data-shayari-id="${e.id}"]`);e&&e.setAttribute("href",t)})}function handleLikeToggle(a){if(userIsLoggedIn){const n=document.querySelector(`button[data-shayari-id="${a}"] i`),s=ref(database,"shayaris/"+a);get(s).then(e=>{var t;e.exists()&&(-1===(t=(e=e.val().likes||[]).indexOf(currentUserId))?(e.push(currentUserId),n.classList.remove("fa-regular"),n.classList.add("fa-solid")):(e.splice(t,1),n.classList.remove("fa-solid"),n.classList.add("fa-regular")),update(s,{likes:e}).then(()=>{updateLikeCount(a)}).catch(e=>{console.error("Error updating likes:",e)}))})}else alert("You need to log in to like a post.")}function updateLikeCount(t){var e=ref(database,"shayaris/"+t);get(e).then(e=>{e.exists()&&(e=e.val().likes||[],document.querySelector(`.like-count[data-shayari-id="${t}"]`).textContent=e.length)})}let userIsLoggedIn=!(window.onload=function(){console.log("Page loaded"),sessionStorage.getItem("reloaded")?console.log("Page is working properly, no error"):(console.log("First time loading, reloading the page..."),sessionStorage.setItem("reloaded","true"),location.reload())}),currentUserId="";function login(e,t){signInWithEmailAndPassword(auth,e,t).then(e=>{e=e.user,currentUserId=e.uid,userIsLoggedIn=!0,e=ref(database,"users/"+e.uid+"/username");get(e).then(e=>{e.exists()?(e=e.val(),document.getElementById("usernameDisplay").textContent=e,document.getElementById("loginButton").style.display="none",document.getElementById("non-main-shayari-container").style.display="block",document.getElementById("postbtn").style.display="block",document.getElementById("loginFormContainer").style.display="none",loadShayaris()):console.error("No username found for this user.")}).catch(e=>{console.error("Error fetching username:",e)})}).catch(e=>{console.error("Error signing in:",e),alert("Login failed: "+e.message)})}function likeShayari(t,a){const n=auth.currentUser;if(n){const s=ref(database,`users/${n.uid}/likes/`+t),o=ref(database,"shayaris/"+t);get(s).then(e=>{e.exists()?remove(s).then(()=>{get(o).then(e=>{e.exists()&&(e=(e.val().likes||[]).filter(e=>e!==n.uid),update(o,{likes:e}).then(()=>{a.innerHTML='<i class="fa-regular fa-heart"></i>',updateLikeCount(t)}))})}).catch(e=>{console.error("Error removing like:",e)}):set(s,!0).then(()=>{get(o).then(e=>{e=e.exists()&&e.val().likes||[];e.push(n.uid),update(o,{likes:e}).then(()=>{a.innerHTML='<i class="fa-solid fa-heart"></i>',updateLikeCount(t)})})}).catch(e=>{console.error("Error adding like:",e)})}).catch(e=>{console.error("Error checking user like status:",e)})}else alert("You must be logged in to like a shayari.")}function loadUsernames(){var e=ref(database,"users");get(e).then(e=>{if(e.exists()){const a=document.getElementById("userList");a.innerHTML="",e.forEach(e=>{const t=e.val().username;e=document.createElement("li");e.classList.add("text-lg","cursor-pointer","underline-animation"),e.textContent=t,e.addEventListener("click",()=>{filterShayarisByUsername(t),document.getElementById("userListModal").style.display="none"}),a.appendChild(e)})}else console.log("No users found")}).catch(e=>{console.error("Error loading users:",e)})}function filterShayarisByUsername(n){var e=ref(database,"shayaris");const s=document.getElementById("shayari-container");get(e).then(e=>{s.innerHTML="",e.exists()?(e.forEach(e=>{var t,a=e.val();a.username===n&&((t=document.createElement("div")).classList.add("bg-gray-800","p-4","rounded","mb-4"),t.innerHTML=`
                <p class="text-sm text-gray-400">${a.username} - ${a.timestamp}</p>
                <p style="white-space: pre-wrap;">${a.content}</p>
                <button class="like-button" data-shayari-id="${e.key}">Like</button>
                <span class="like-count" data-shayari-id="${e.key}">0</span>
              `,s.appendChild(t),updateLikeCount(e.key))}),s.scrollTop=0):console.log("No shayaris found")}).catch(e=>{console.error("Error filtering shayaris:",e)})}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("loginForm").addEventListener("submit",function(e){e.preventDefault(),login(document.getElementById("email").value,document.getElementById("password").value)}),document.getElementById("postShayariForm").addEventListener("submit",function(e){e.preventDefault();var t,a,n,e=document.getElementById("shayari").value;e?(t=document.getElementById("usernameDisplay").textContent,a={day:"2-digit",month:"2-digit",year:"numeric"},a=(new Date).toLocaleDateString("en-GB",a)+" "+(new Date).toLocaleTimeString(),n=ref(database,"shayaris"),n=push(n),set(n,{content:e,username:t,timestamp:a,likes:[]}).then(()=>{alert("Shayari posted successfully!"),document.getElementById("shayari").value="",loadShayaris()}).catch(e=>{console.error("Error posting shayari:",e)})):alert("Shayari content cannot be empty!")}),document.getElementById("shayari-container").addEventListener("click",function(e){e.target.classList.contains("like-button")&&likeShayari(e.target.getAttribute("data-shayari-id"))}),document.getElementById("viewUsersButton").addEventListener("click",()=>{loadUsernames(),document.getElementById("userListModal").style.display="flex"}),document.getElementById("closeUserList").addEventListener("click",()=>{document.getElementById("userListModal").style.display="none"}),loadShayaris()});const postBtn=document.getElementById("postbtn"),shayariSection=document.getElementById("shayari-section"),morebtn=(postBtn.addEventListener("click",()=>{"none"===shayariSection.style.display||""===shayariSection.style.display?shayariSection.style.display="block":shayariSection.style.display="none"}),document.getElementById("morebtn")),options=document.getElementById("options"),loginButton=(morebtn.addEventListener("click",()=>{"none"===options.style.display||""===options.style.display?options.style.display="block":options.style.display="none"}),document.getElementById("loginButton")),loginFormContainer=document.getElementById("loginFormContainer"),changebg=(loginButton.addEventListener("click",()=>{"none"===loginFormContainer.style.display||""===loginFormContainer.style.display?loginFormContainer.style.display="block":loginFormContainer.style.display="none"}),document.addEventListener("DOMContentLoaded",()=>{var e=localStorage.getItem("backgroundImage");e&&(document.body.style.backgroundImage=`url(${e})`),document.querySelectorAll(".bg-image").forEach(t=>{t.addEventListener("click",()=>{var e=t.src;document.body.style.backgroundImage=`url(${e})`,localStorage.setItem("backgroundImage",e)})}),document.querySelector(".remove-bg-button").addEventListener("click",()=>{document.body.style.backgroundImage="none",document.body.style.backgroundColor="#2c3e50",localStorage.removeItem("backgroundImage")})}),document.getElementById("changebg")),demobox=document.getElementById("demobox"),mainn=document.getElementById("mainn"),home=(changebg.addEventListener("click",()=>{"none"===demobox.style.display||""===demobox.style.display?(demobox.style.display="block",mainn.style.display="none"):(demobox.style.display="none",mainn.style.display="block")}),document.getElementById("home"));home.addEventListener("click",()=>{"none"!==demobox.style.display&&demobox.style.display,demobox.style.display="none",mainn.style.display="block"});
              </script>


  <style>
@keyframes fadeIn{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}.fade-in{animation:fadeIn .8s ease-in-out}.neon-btn{background:linear-gradient(145deg,#3b4148,#20262d);box-shadow:0 0 15px rgba(59,65,72,0.7),inset 0 0 15px rgba(50,50,50,0.7);transition:all .3s ease;border-radius:9999px}.neon-btn:hover{box-shadow:0 0 25px #4ade80,0 0 30px #4ade80;transform:translateY(-3px)}.dark-card{background:linear-gradient(145deg,#222831,#1a1f25);box-shadow:4px 4px 12px rgba(0,0,0,0.8),-4px -4px 12px rgba(50,50,50,0.2);border-radius:20px;padding:1.5rem;transition:transform .5s ease}.dark-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,0.8),-4px -4px 15px rgba(50,50,50,0.2)}.glow-text{color:#fff;text-shadow:0 0 5px #4ade80,0 0 10px #4ade80,0 0 20px #4ade80}.dark-input{background-color:#1f2937;border:1px solid #3b4148;padding:.8rem;border-radius:8px;outline:0;transition:border-color .3s ease}.dark-input:focus{border-color:#4ade80}.bg-animated{background:linear-gradient(120deg,#20262d,#1f2937,#111827);background-size:600% 600%;animation:gradientShift 10s ease infinite}@keyframes gradientShift{0%{background-position:0 50%}50%{background-position:100% 50%}100%{background-position:0 50%}}.underline-animation{position:relative;display:inline-block;color:#4ade80;text-decoration:none}.underline-animation::after{content:'';position:absolute;width:100%;height:2px;bottom:0;left:0;background-color:#4ade80;visibility:hidden;transform:scaleX(0);transition:all .3s ease-in-out}.underline-animation:hover::after{visibility:visible;transform:scaleX(1)}.dark-textarea{background-color:#1f2937;border:1px solid #3b4148;padding:.8rem;border-radius:10px;resize:none;transition:border-color .3s ease}.dark-textarea:focus{border-color:#60a5fa}#userList li{padding-top:3%}.made-with-love{width:max-content;position:absolute;left:50%;transform:translateX(-50%);color:#e0e0e0;font-size:.9rem;display:flex;align-items:center;justify-content:center;gap:10px}.made-with-love i{color:#ff4081;transition:color .3s}.made-with-love i#heart:hover,.made-with-love i#coffee:hover{color:#ff80ab}.made-with-love a{color:#6a676795;text-decoration:none;position:relative;display:inline-block;padding:4px;font-weight:bold;letter-spacing:.1em;transition:color .3s}.made-with-love a:hover{color:#4caf50}.made-with-love a::after{content:"";display:block;height:2px;background:#4caf50;width:0;position:absolute;bottom:0;left:50%;transition:width .3s,left .3s}.made-with-love a:hover::after{width:100%;left:0}#postbtn{display:none;position:fixed;font-weight:bolder;font-size:5rem;margin-left:80dvw;margin-top:54dvh;cursor:pointer}.glow{color:#000;text-shadow:0 0 5px rgba(251,251,251,0.848),0 0 9px rgba(186,186,186,0.5),0 0 9px #b0b0b0,0 0 20px rgb(0 255 255 / 45%)}.hover-motion:hover{transform:scale(1.2);transition:transform .2s ease-in-out}#postbtn svg{filter:drop-shadow(0 0 10px rgba(117,251,253,0.8))}.nonu{width:40%;display:grid;height:max-content;padding-top:3%;padding-bottom:3%;border-radius:10px;margin-left:56%;justify-content:center;background:#0f0e0e;position:fixed;gap:13px}@media(min-width:661px){.nonu{width:20%;margin-left:78%}}.background-selector{text-align:center;padding:50px}.image-container{display:flex;justify-content:center;width:100%;height:79dvh;z-index:22}.bg-image{width:100px;height:100px;cursor:pointer;border:2px solid white;border-radius:6px;transition:border-color .3s ease;margin-top:3%;margin-left:3%;flex-wrap:wrap}.bg-image:hover{border-color:#00ff26}body{margin:0;transition:background-image .5s ease;background-color:#2c3e50;background-size:cover !important;background-repeat:no-repeat !important;background-position:center !important}.remove-bg-button{margin-top:20px;padding:10px 20px;font-size:16px;cursor:pointer;border:0;background-color:#3b4148;color:white;border-radius:5px;transition:background-color .3s ease;margin-left:3%;margin-top:3%}.remove-bg-button:hover{background-color:#c0392b}@media(max-width:500px){.bg-image{width:80px;height:80px}}.itemss{height:60dvh;overflow-y:scroll;scrollbar-width:none}  </style>
</head>

<body class="text-white" style="background: #0f0e0e;">
<nav class="bg-gray-800 p-4 flex justify-between items-center shadow-xl dark-card mx-4 my-4"><div class="text-3xl font-bold tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-blue-400 to-purple-600 transform transition duration-500 hover:scale-110"><a href="#">The Shayari Section</a></div><div><span id="usernameDisplay" class="mr-4"></span><button id="morebtn" class="bg-purple-600 text-white py-2 px-4 rounded-lg neon-btn">More</button></div></nav><div style="display:none" id="options"><div class="nonu"><button id="loginButton" class="bg-blue-600 text-white py-2 px-4 rounded-lg neon-btn">Login</button><button id="viewUsersButton" class="bg-purple-600 text-white py-2 px-4 rounded-lg neon-btn">View Users</button><button id="changebg" class="bg-purple-600 text-white py-2 px-4 rounded-lg neon-btn">Change BG</button><button id="home" class="bg-purple-600 text-white py-2 px-4 rounded-lg neon-btn">Home</button></div></div><div class="image-container" id="demobox" style="display:none"><div class="itemss"><img src="img/bg1.jpg" alt="Background 1" class="bg-image"> <img src="img/bg2.jpeg" alt="Background 2" class="bg-image"> <img src="img/bg3.jpeg" alt="Background 3" class="bg-image"> <img src="img/bg4.jpeg" alt="Background 4" class="bg-image"> <img src="img/bg5.jpeg" alt="Background 4" class="bg-image"> <img src="img/bg6.jpeg" alt="Background 4" class="bg-image"> <img src="img/bg7.png" alt="Background 4" class="bg-image"> <img src="img/bg8.png" alt="Background 4" class="bg-image"> <img src="img/bg9.png" alt="Background 4" class="bg-image"> <img src="img/bg10.png" alt="Background 4" class="bg-image"></div><button class="remove-bg-button">Default BG</button></div><div id="mainn"><div id="loginFormContainer" class="p-6 fade-in max-w-md mx-auto dark-card glassmorph" style="display:none"><h2 class="text-2xl font-semibold mb-4 text-center glow-text whatever">Login</h2><form id="loginForm" class="p-4"><div class="mb-4"><label class="block text-sm mb-2" for="email">Email:</label><input type="email" id="email" class="dark-input w-full" required></div><div class="mb-4"><label class="block text-sm mb-2" for="password">Password:</label><input type="password" id="password" class="dark-input w-full" required></div><button type="submit" class="neon-btn w-full py-3 text-lg">Login</button><p style="padding-top:3.5%">don't have account<a href='/main' style='color:#87ceeb;padding-top:.5%;padding-left:1%;margin-right:2%'>create account.</a>Then login again</p></form></div><div class="text-6xl glow hover-motion" id="postbtn"><svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#75FBFD"><path d="M453-280h60v-166h167v-60H513v-174h-60v174H280v60h173v166Zm27.27 200q-82.74 0-155.5-31.5Q252-143 197.5-197.5t-86-127.34Q80-397.68 80-480.5t31.5-155.66Q143-709 197.5-763t127.34-85.5Q397.68-880 480.5-880t155.66 31.5Q709-817 763-763t85.5 127Q880-563 880-480.27q0 82.74-31.5 155.5Q817-252 763-197.68q-54 54.31-127 86Q563-80 480.27-80Zm.23-60Q622-140 721-239.5t99-241Q820-622 721.19-721T480-820q-141 0-240.5 98.81T140-480q0 141 99.5 240.5t241 99.5Zm-.5-340Z"/></svg></div><section id="shayari-section" class="p-6 fade-in max-w-2xl mx-auto dark-card my-6" style="display:none"><h2 class="text-2xl font-semibold mb-4 text-center glow-text">Post a Shayari</h2><form id="postShayariForm" class="p-4"><div class="mb-4"><label class="block text-sm mb-2" for="shayari">Shayari:</label><textarea id="shayari" class="dark-textarea w-full" rows="4" required></textarea></div><button type="submit" class="neon-btn w-full py-3 text-lg">Post Shayari</button></form></section><section id="non-main-shayari-container"><section id="shayari-container" class="p-6 max-w-2xl mx-auto fade-in" style="display:flex;flex-direction:column;height:80dvh;overflow-y:scroll;scrollbar-width:none"></section></section></div><div id="userListModal" style="display:none;overflow-y:scroll" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"><div class="bg-gray-800 p-6 rounded-lg shadow-lg"><h2 class="text-xl font-semibold mb-4">All User's</h2><ul id="userList" class="list-disc pl-6" style="display:grid;overflow-y:scroll;height:24dvh;background:#f0f8ff1c;width:fit-content;border-radius:5%;color:#87ceeb;scrollbar-width:none;padding-right:22px"></ul><button id="closeUserList" class="mt-4 bg-red-600 text-white py-2 px-4 rounded-lg">Close</button></div></div><div class="made-with-love">Made with<i id="heart">ðŸ’–</i>&amp;<i id="coffee">â˜•</i>by<a href="https://ramjeemishra.github.io/Ramjee_Mishra/">Developer Ram</a></div>
</body>

</html>